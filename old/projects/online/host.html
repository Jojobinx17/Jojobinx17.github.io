 <!doctype html>
<html>
	
	<head>
		<meta charset="utf-8">
		
		<link rel="stylesheet" type="text/css" href="../../assets/css/styles.css">	
		<link rel="stylesheet" type="text/css" href="../../assets/css/lan.css">
		
		<script src="../../assets/js/online/cookies.js"></script>
		
		<script src="https://unpkg.com/peerjs@1.3.2/dist/peerjs.min.js"></script>
		<script src="../../assets/js/online/host.js"></script>
		<script src="../../assets/js/online/host-visual.js"></script>
		<script src="../../assets/js/online/cookies.js"></script>
			
		<!-- FALLBACK LIBRARY CODE:
		<script src="../../assets/js/peerjs.js></script>  -->
		
		<title>online games - host</title>
		
	</head>

	<body> <div align="center">
	
		<p class="title">online games (host) || <a href="javascript:devtools();">toggle host tools</a></p>
		<hr class="headerbar">
		
		
		<div id="devtools">
			
			<a id="idtext" style="text-decoration: none"></a>
			<a id="roomid" style="text-decoration: none; line-height: 3">creating room...</a>
			<a id="players" style="text-decoration: none;"></a>

			<br />

			<button id="copybtn" class="copy-button" style="display: none" onClick="copyRoomId();">copy id</button>
			<button id="hidebtn" class="copy-button" style="display: none" onClick="toggleLog();">toggle log</button>
			<button id="openclosebtn" class="copy-button" style="display: none" onClick="showCloseGUI();">close room</button> 

			<small id="closemsg" style="text-decoration: none"></small>

			<button id="cancelclosebtn" class="copy-button" style="display: none" onClick="hideCloseGUI();">cancel</button>
			<button id="destroybtnerr" class="copy-button" style="display: none" onClick="destroyRoom();">close room</button>
			<button id="destroybtn" class="copy-button" style="display: none" onClick="destroyRoom();">close room</button> <br /> <br />
			
			<small id="waiting" style="display: none">waiting for other people to connect... do not refresh this page.</small>
			<small id="log" style="display: none"></small>

		</div>
		
		<div class="buffer"></div>
		
		<div id="main" style="display: none">
			
		<div id="gamereqests" class="game-requests" style="display: none">
			
			<p id="gamerequestheader">Game request from username (PID pid):</p>
			
			<p class="requested-game" id="requestedgame">game</p> &nbsp;
			<button class="copy-button" onClick="acceptGameRequest();">accept</button>
			<button class="copy-button" onClick="rejectGameRequest();">reject</button>
			
		</div>
			
		<div id="gamechooseplayers" class="game-requests" style="display: none">
			
			<p id="gamerequestheader">Choose players for game: <button class="copy-button" onClick="javascript:acceptGameRequest();">refresh</button></p>
			
			<form id="playerstochoose">
			
				<label class="checkbox-label"> <input type="checkbox" id="p1">&nbsp;username</label>
			
			</form>
			
			<br />
			
			<button class="copy-button" onClick="document.getElementById('gamechooseplayers').style.display = 'none'">cancel</button>
			<button class="copy-button" onClick="startGame();">play!</button>
			
			<small id="chooseplayerserror"></small>

		</div>
			
		<div id="tic-tac-toe" class="game-requests" style="display: none">
			
			<p class="game-title" id=gametitle>[game]</p>
			<p id="gamerole">you are a [role]</p>
			
		</div>
			
		<div class="row" id="main-content">
			
			<div class="column-chat">

				<div id="chat">
					
					<div class="column-header">chat<br><hr></div> 
					
					<form onsubmit="sendChat(); return false;">
						<input type="text" class="input" placeholder="send a chat..." id="chatbox">
						<input type="submit" class="copy-button" id="sendbtn" value="send">
					</form>

					<form onsubmit="saveChangeName(); return false;">
						<input type="text" class="input" value="unnamed-user" style="display: none" id="namebox" maxlength="25">
						<input type="submit" value="save" class="copy-button" id="savenamebtn" style="display: none">
					</form>

					<small id="currentname">current name: unnamed-user</small>
					<button class="copy-button" id="changenamebtn" onClick="showChangeName();">change</button>
					
					<div id="chatlog" class="chat-thread">
						<p id="emptychatmsg" style="color: dimgray; text-align: center;">the chat thread is empty.</p>
					</div>
					
				</div>
				
			</div>
			
		<div class="column-games">
			
			<div class="column-header">connected players:<br><hr></div> 
			<p id="usernames"></p>
			
			<div class="column-header">games<br><hr></div>
			
			<div class="box-outline" style="margin: 0px 20%">
				 tic-tac-toe
				<button id="tictactoereqbtn" class="copy-button" onClick="requestGame(0);">request</button>
			</div><br>

			<div class="box-outline" style="margin: 0px 20%">
				spam game
				<button id="spamreqbtn" class="copy-button" onClick="requestGame(1);">request</button>
			</div><br>
			
		</div>

		</div>
			
		</div>
		
		<script>
			if(getCookie("username") != "") {
				myUsername = getCookie("username");
				console.log("cashed username:", myUsername);

				document.getElementById("currentname").innerHTML = "current name: " + myUsername;
				document.getElementById("namebox").value = myUsername;
				
				usernames[0] = myUsername;
				
				updateUsernameVisuals();
			}
		</script>
	
	</div> </body>
</html>